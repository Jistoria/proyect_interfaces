<!DOCTYPE html>
<html>
  <head>
    <title>Iniciar sesión - Tienda de electrónicos</title>
    <link rel="stylesheet" type="text/css" href="style.css">
    <style>

    </style>
  </head>
  <body>
    <div id="app">
      <h1>{{prueba}}</h1>
      <h1>Iniciar sesión</h1>
      <ul>
        <li>{{ error }}</li>
      </ul>
    <form @submit.prevent="login" action="index.html" method="post">
      <label for="email">Correo electrónico:</label>
      <input type="email" v-model="email">

      <label for="contrasena">Contraseña:</label>
      <input type="password" v-model="contraseña">

      <input type="submit" value="Iniciar sesión">

      <div class="registrarse">
        ¿No tienes cuenta? <a href="register.html">Regístrate aquí</a>
      </div>
    </form>
    </div>
    


    <!-- codigo script de vue -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script>
        const usuarioString = localStorage.getItem('usuario');
        const usuario = JSON.parse(usuarioString);
        console.log(usuario); // Imprime el objeto usuario en la consola

     const { createApp } = Vue

      createApp({
        data() {
          return {
            error: '',
            prueba: 'Hello Vue!',
            contraseña:'',
            email:'',
            usuario: JSON.parse(localStorage.getItem('usuario')) || {},
            emailadmin:'maestrojgcm@gmail.com',

         }
       },
       methods:{
        login: function(e) {
    if(this.email==this.emailadmin){
      const admin = {
                nombre: 'Soy el admin',
                apellido: 'Guapo',
                email: this.email,
              };
              localStorage.setItem('admin', JSON.stringify(admin));
              window.location.href = 'admin.html';
    }else{
      if (this.email !== this.usuario.email || this.contraseña !== this.usuario.contraseña) {
      this.error = 'Datos inválidos';
      e.preventDefault();
    }else{
      localStorage.setItem('usuario', JSON.stringify(usuario));
      window.location.href = 'index.html';
    }
    }
   
    
  }
       }
      }).mount('#app')
      
    </script>
  </body>
</html>

